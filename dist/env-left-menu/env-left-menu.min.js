+function(e){function n(n,l){if(this instanceof i&&n&&"object"==typeof n){var r=this,o=this.options.keys,m={data:n,id:n[o.id],name:n[o.name],children:[],$element:e(s.menuItem),$childrenCntr:null,level:null,parentMenuItem:null};if(m.$element.children("a").click(function(){if(m.children.length>0)if(m.$element.hasClass(a.active))m.$element.removeClass(a.active),m.$childrenCntr.slideUp();else{m.$childrenCntr.slideDown(),m.$element.addClass(a.active);var e=m.parentMenuItem?m.parentMenuItem.children:r.menuItems;for(var n in e)if(e[n].$element.hasClass(a.active)&&e[n]!=m){e[n].$element.removeClass(a.active),e[n].$childrenCntr.slideUp();break}}t.call(r,m)}).find("."+a.menuItemTitle).text(m.name).attr("title",m.name),l?(m.level=l.level+1,m.$element.addClass(a.level+m.level),m.parentMenuItem=l,l.children.push(m),l.$childrenCntr.append(m.$element)):(m.level=0,m.$element.addClass(a.level+0),this.menuItems.push(m),e(this.element).append(m.$element)),n[o.children]&&n[o.children].length>0){m.$childrenCntr=e(s.subMenuCntr),m.$element.append(m.$childrenCntr);for(var d in n[o.children])arguments.callee.call(this,n[o.children][d],m)}else l||m.$element.find("."+a.menuItemArrow).remove()}}function t(e){this instanceof i&&"function"==typeof this.options.onMenuItemClicked&&this.options.onMenuItemClicked.call(this,e)}function i(t,i){if(t&&t instanceof HTMLUListElement){var s=e(t);i=e.extend(!0,{},l,i),this.options=i,this.element=t,this.menuItems=[],s.addClass(i.mini?a.bodyMini:a.body);for(var r in i.data)n.call(this,i.data[r],null)}}var l={keys:{id:"id",name:"name",children:"children",icon:"icon"},mini:!1,data:[],onMenuItemClicked:function(e){}},a={body:"env-left-menu",bodyMini:"env-left-menu-mini",menuItemIcon:"eln-item-icon",menuItemTitle:"eln-item-title",menuItemArrow:"eln-item-arrow",level:"level",hidden:"hidden",collapse:"collapse",active:"active",icon:"env-icon-16"},s={menuItem:["<li>","<a>",'<span class="'+a.menuItemTitle+'"></span>','<span class="'+a.menuItemArrow+'"></span>',"</a>","</li>"].join(""),subMenuCntr:"<ul></ul>"};i.prototype={constructor:i,setMini:function(n){this.options.mini=!!n,n?e(this.element).removeClass(a.body).addClass(a.bodyMini):e(this.element).removeClass(a.bodyMini).addClass(a.body)}},e.fn.envLeftMenu=function(n){if(0===this.length)return this;if(!n)return e(this[0]).data("envLeftMenu");if(!i.prototype[n])return this.each(function(){var t=e(this).data("envLeftMenu");t||(t=new i(this,n),e.data(this,"envLeftMenu",t))});var t=i.prototype[n],l=e(this[0]).data("envLeftMenu");return l?"function"==typeof t?t.apply(l,Array.prototype.slice.call(arguments,1)):l[n]:void 0}}(jQuery);