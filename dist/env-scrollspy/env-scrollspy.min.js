+function(t){"use strict";function s(e,i){var o=t.proxy(this.process,this);this.$body=t("body"),this.$element=t(e),this.$scrollElement=t(t(e).is("body")?window:e),this.options=t.extend({},s.DEFAULTS,i),this.items=[],this.$activeItem=null,this.refresh(),this.$scrollElement.scroll(o)}s.VERSION="0.1.0",s.DEFAULTS={},s.prototype.getOffsetTop=function(s){return t.isWindow(this.$scrollElement[0])?s.offset().top-t(window).scrollTop():s.offset().top-this.$element.offset().top},s.prototype.refresh=function(){var s=this;this.items=[],this.$element.find(".env-scrollspy-item").each(function(){s.items.push(t(this))}),this.items.sort(function(t,s){return t.position().top-s.position().top}),this.process()},s.prototype.process=function(){var t=0,s=null;for(t=0;t<this.items.length&&!(this.getOffsetTop(this.items[t])>1);t++);s=this.items[0===t?0:t-1],this.$activeItem!==s&&(this.$activeItem=s,this.$element.triggerHandler({type:"env.scrollspy",$activeItem:this.$activeItem}))},t.fn.envScrollspy=function(e){return this.each(function(){var i=t(this),o=i.data("env-scrollspy");o||(o=new s(this,e),i.data("env-scrollspy",o)),"string"==typeof e&&o[e]()})},t.fn.envScrollspy.Constructor=s}(jQuery);